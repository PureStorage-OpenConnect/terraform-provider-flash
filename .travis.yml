dist: trusty
sudo: false
language: go
matrix:
  include:
  - go: 1.x
    env: LATEST=true
  - go: 1.9.x
  - go: 1.10.x
  - go: 1.11.x
  - go: tip
  allow_failures:
  - go: tip
before_install:
- go get github.com/mitchellh/gox
install:
- bash scripts/gogetcookie.sh
- go get github.com/kardianos/govendor
- go get github.com/mitchellh/gox
script:
- make test
- make vendor-status
- make vet
- if [ "${LATEST}" = "true" ]; then gox -os="linux darwin windows" -arch="amd64" -output="{{.OS}}/terraform-provider-purestorage"
  -ldflags "-X main.Rev=`git rev-parse --short HEAD`" -verbose ./...; fi
- if [ "${LATEST}" = "true" ]; then sha1sum windows/terraform-provider-purestorage.exe
  > terraform-provider-purestorage.windows.sha1; tar -czf terraform-provider-purestorage.windows.tar.gz  windows/terraform-provider-purestorage.exe;
  fi
- if [ "${LATEST}" = "true" ]; then sha1sum darwin/terraform-provider-purestorage
  > terraform-provider-purestorage.darwin.sha1; tar -czf terraform-provider-purestorage.darwin.tar.gz  darwin/terraform-provider-purestorage;
  fi
- if [ "${LATEST}" = "true" ]; then sha1sum linux/terraform-provider-purestorage >
  terraform-provider-purestorage.linux.sha1; tar -czf terraform-provider-purestorage.linux.tar.gz  linux/terraform-provider-purestorage;
  fi
deploy:
  provider: releases
  api_key:
    secure: deAUzT04UaxVdT9byBvMp8fIWTEGImV/kULtfltCkfYY0urnoSLRq3n1QkoIBsNTl3jUw5FX3szgRpMberVAJlqP3Yk7yOktWS0lsg/RkLqc0YTRZ80Btp978vapzKYqNPe4IJ8BTZqaVQ0Es9eQL5WsKVgSEUcUyHNEETWtxhfRI/Ex1nHOuoUkgPvkDAi/0zs8w2pgVLqbPTbWMuXk7l8F9dbVtzf4fs9oxHsxi89vhHDNA88U+ZPajzKaABK698eXvayntL5tfCEz4l5A1vkic6KCqwkOAGFFg/ctMIXgDjixTLMpHCh8cjJYkQXv0NgPSkNQPEuvgIi1p7chFoxl2u8A/r5U/73UH0u8WiP5h31VwAfrizow8GczI+Lwu9jLsONca4UyWJPlsozC33aTDYCg7n3IqTdfHjr8TpQtzqVlMF53nANz9nNa6G/yyy6jKSh/qRZ0f6aNYZrVGuAkYWbZluadWJojtyG3vEliHqRWzP9O0gKHosdmEC9vsb3E8+oBe1GhILcpd7EZqFGhkuKlna8bNO37IIw35Z/bLmNyqoJ2PIM3SS4j8GfYIR2xyvcfd4/qcgVpt+y9r++CV9LJfvrzQ6qQ+gbr8jOJfL5WhJFEWlramyYgr5O8fdkA6fHtYZWngMhCt0XayNOlYNWko0yvwjzhv6X5J+c=
  file: 
  - terraform-provider-purestorage.linux.tar.gz
  - terraform-provider-purestorage.linux.sha1
  - terraform-provider-purestorage.darwin.tar.gz
  - terraform-provider-purestorage.darwin.sha1
  - terraform-provider-purestorage.windows.tar.gz
  - terraform-provider-purestorage.windows.sha1
  on:
    repo: devans10/terraform-provider-purestorage
    tags: true
env:
  global:
    secure: deAUzT04UaxVdT9byBvMp8fIWTEGImV/kULtfltCkfYY0urnoSLRq3n1QkoIBsNTl3jUw5FX3szgRpMberVAJlqP3Yk7yOktWS0lsg/RkLqc0YTRZ80Btp978vapzKYqNPe4IJ8BTZqaVQ0Es9eQL5WsKVgSEUcUyHNEETWtxhfRI/Ex1nHOuoUkgPvkDAi/0zs8w2pgVLqbPTbWMuXk7l8F9dbVtzf4fs9oxHsxi89vhHDNA88U+ZPajzKaABK698eXvayntL5tfCEz4l5A1vkic6KCqwkOAGFFg/ctMIXgDjixTLMpHCh8cjJYkQXv0NgPSkNQPEuvgIi1p7chFoxl2u8A/r5U/73UH0u8WiP5h31VwAfrizow8GczI+Lwu9jLsONca4UyWJPlsozC33aTDYCg7n3IqTdfHjr8TpQtzqVlMF53nANz9nNa6G/yyy6jKSh/qRZ0f6aNYZrVGuAkYWbZluadWJojtyG3vEliHqRWzP9O0gKHosdmEC9vsb3E8+oBe1GhILcpd7EZqFGhkuKlna8bNO37IIw35Z/bLmNyqoJ2PIM3SS4j8GfYIR2xyvcfd4/qcgVpt+y9r++CV9LJfvrzQ6qQ+gbr8jOJfL5WhJFEWlramyYgr5O8fdkA6fHtYZWngMhCt0XayNOlYNWko0yvwjzhv6X5J+c=
